{"name":"Rlock","tagline":"php redis lock","body":"# Rlock\r\n[![Build Status](https://travis-ci.org/thbourlove/rlock.png?branch=master)](https://travis-ci.org/thbourlove/rlock)\r\n[![Coverage Status](https://coveralls.io/repos/thbourlove/rlock/badge.png?branch=master)](https://coveralls.io/r/thbourlove/rlock?branch=master)\r\n[![Scrutinizer Code Quality](https://scrutinizer-ci.com/g/thbourlove/rlock/badges/quality-score.png?s=f113f1ab965f6aaef55e497a330caf72bff94201)](https://scrutinizer-ci.com/g/thbourlove/rlock/)\r\n[![SensioLabsInsight](https://insight.sensiolabs.com/projects/c5aa62f0-0edc-42e7-af61-2800ab327065/mini.png)](https://insight.sensiolabs.com/projects/c5aa62f0-0edc-42e7-af61-2800ab327065)\r\n[![Stable Status](https://poser.pugx.org/eleme/rlock/v/stable.png)](https://packagist.org/packages/eleme/rlock)\r\n\r\nRedis lock for some atomic opration.\r\n\r\n## Install With Composer:\r\n\r\n```json\r\n\"require\": {\r\n    \"eleme/rlock\": \"~0.2\"\r\n}\r\n```\r\n\r\n## Usage\r\n\r\n#### Rlock\r\n``` php\r\n<?php\r\n\r\nuse Eleme\\Rlock\\Lock;\r\nuse Predis\\Client;\r\n\r\nrequire_once(__DIR__.'/../vendor/autoload.php');\r\n\r\n$redis = new Client();\r\n\r\n$lock1 = new Lock($redis, 'lock1');\r\n$lock1->acquire();\r\n// release it by manually or it will be autoreleased.\r\n$lock1->release();\r\n\r\n\r\n// pass some options like timeout and interval.\r\n$lock2 = new Lock($redis, 'lock2', array('timeout' => 5000, 'interval' => 500));\r\necho $lock2->acquire() ? 'true' : 'false', \"\\n\";\r\n\r\n// sometimes you may need a non-block lock.\r\n$lock3 = new Lock($redis, 'lock3', array('blocking' => false));\r\necho $lock3->acquire() ? 'true' : 'false', \"\\n\";\r\n$lock4 = new Lock($redis, 'lock3', array('blocking' => false));\r\necho $lock4->acquire() ? 'true' : 'false', \"\\n\";\r\n```\r\n\r\n#### Factory\r\n```php\r\n<?php\r\n\r\nuse Eleme\\Rlock\\Factory;\r\nuse Predis\\Client;\r\n\r\nrequire_once(__DIR__.'/../vendor/autoload.php');\r\n\r\n$factory = new Factory(new Client);\r\n$lock = $factory->make('test');\r\n```\r\n\r\n#### Extended Predis\r\n```php\r\n<?php\r\n\r\nuse Eleme\\Rlock\\Predis;\r\n\r\nrequire_once(__DIR__.'/../vendor/autoload.php');\r\n\r\n$redis = new Predis();\r\n$lock = $redis->lock('lock1');\r\necho $lock->acquire() ? 'true' : 'fasel', \"\\n\";\r\n```\r\n\r\n#### Laravel\r\n\r\n##### Service Provider\r\n\r\n`'Eleme\\Rlock\\Provider\\Laravel\\RlockServiceProvider'`\r\n\r\n##### Facade\r\n\r\n`'Rlock'             => 'Eleme\\Rlock\\Provider\\Laravel\\Facade'`\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}